---
import { BUSINESS_INFO } from '@/consts';

interface Props {
  type?: 'LocalBusiness' | 'Organization' | 'Article';
  data?: Record<string, any>;
}

const { type = 'LocalBusiness', data = {} } = Astro.props;

// Base data for LocalBusiness (Lethbridge specific)
const localBusinessData = {
  "@context": "https://schema.org",
  "@type": "VideoProductionService",
  "name": BUSINESS_INFO.name,
  "alternateName": BUSINESS_INFO.alternateName,
  "image": BUSINESS_INFO.image,
  "@id": BUSINESS_INFO.url,
  "url": BUSINESS_INFO.url,
  "telephone": BUSINESS_INFO.telephone,
  "email": BUSINESS_INFO.email,
  "address": {
    "@type": "PostalAddress",
    ...BUSINESS_INFO.address
  },
  "geo": {
    "@type": "GeoCoordinates",
    ...BUSINESS_INFO.geo
  },
  "areaServed": [
    {
      "@type": "City",
      "name": "Lethbridge",
      "sameAs": "https://en.wikipedia.org/wiki/Lethbridge"
    },
    {
      "@type": "City",
      "name": "Medicine Hat"
    },
    {
      "@type": "City",
      "name": "Calgary"
    },
    {
      "@type": "AdministrativeArea",
      "name": "Southern Alberta"
    }
  ],
  "priceRange": BUSINESS_INFO.priceRange,
  "openingHoursSpecification": {
    "@type": "OpeningHoursSpecification",
    "dayOfWeek": [
      "Monday",
      "Tuesday",
      "Wednesday",
      "Thursday",
      "Friday"
    ],
    "opens": "09:00",
    "closes": "17:00"
  },
  "sameAs": [
    ...BUSINESS_INFO.social,
    BUSINESS_INFO.googleBusinessProfile
  ]
};

// Logic to determine final schema based on type
let finalSchema = {};

if (type === 'LocalBusiness') {
  finalSchema = { ...localBusinessData, ...data };
} else {
  // Fallback for other types if needed in future
  finalSchema = { 
    "@context": "https://schema.org", 
    "@type": type, 
    ...data 
  };
}
---

<script type="application/ld+json" set:html={JSON.stringify(finalSchema)} />
