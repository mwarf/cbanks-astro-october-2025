---
import { Image } from "astro:assets";
import { DashedLine } from "@/components/dashed-line";
import { Button } from "@/components/ui/button";
import { cn } from "@/lib/utils";

interface Feature {
  icon?: any;
  text: string;
}

interface Props {
  title: string;
  subtitle?: string;
  description: string;
  images: Array<{
    src: string;
    alt: string;
    class?: string;
  }>;
  ctaText?: string;
  ctaHref?: string;
  features?: Feature[];
  className?: string;
}

const {
  title,
  subtitle,
  description,
  images = [],
  ctaText = "Request a Quote",
  ctaHref = "/contact",
  features = [],
  className,
} = Astro.props;

const mainImage = images[0];
const secondaryImages = images.slice(1, 3);
---

<section class={cn("py-28 lg:py-32 lg:pt-44", className)}>
  <div class="container flex flex-col gap-12 lg:flex-row lg:gap-20">
    {/* Left side - Main content (1/3 width on desktop) */}
    <div class="flex flex-col justify-center lg:w-1/3">
      <div class="max-w-[600px]">
        {subtitle && (
          <p class="text-primary text-sm font-semibold uppercase tracking-wider mb-4">
            {subtitle}
          </p>
        )}
        
        <h1 class="text-foreground font-display font-bold text-3xl tracking-tight md:text-4xl lg:text-5xl xl:text-6xl text-balance">
          {title}
        </h1>

        <p class="text-muted-foreground text-lg mt-6 md:text-xl text-pretty">
          {description}
        </p>

        <div class="mt-8 flex flex-wrap items-center gap-4">
          <Button asChild size="lg">
            <a href={ctaHref}>{ctaText}</a>
          </Button>
          <Button variant="outline" size="lg" asChild>
             <a href="/portfolio">View Gallery</a>
          </Button>
        </div>

        {/* Features List */}
        {features.length > 0 && (
          <div class="relative mt-12 space-y-4">
            <DashedLine
              orientation="horizontal"
              className="mb-8 w-full"
            />
            {features.map((feature) => (
              <div class="flex gap-3 items-start group">
                {feature.icon && (
                  <div class="p-2 rounded-lg bg-primary/5 text-primary group-hover:bg-primary/10 transition-colors">
                     <feature.icon className="size-5 shrink-0" aria-hidden="true" />
                  </div>
                )}
                <p class="text-muted-foreground text-sm leading-relaxed py-1.5">
                  {feature.text}
                </p>
              </div>
            ))}
          </div>
        )}
      </div>
    </div>

    {/* Right side - Bento Grid Images (2/3 width on desktop) */}
    <div class="lg:w-2/3">
      <div class="grid grid-cols-2 grid-rows-2 gap-4 h-full min-h-[500px] lg:min-h-[600px]">
        {/* Main large image */}
        <div class="col-span-2 row-span-2 lg:col-span-1 lg:row-span-2 relative overflow-hidden rounded-2xl shadow-lg group">
           {mainImage && (
            <Image
                src={mainImage.src}
                alt={mainImage.alt}
                width={800}
                height={1000}
                class="size-full object-cover object-center transition-image transition-transform group-hover:scale-105"
                loading="eager"
            />
           )}
            <div class="absolute inset-0 bg-linear-to-t from-black/40 to-transparent opacity-60"></div>
        </div>

        {/* Secondary Top Image */}
        <div class="hidden lg:block relative overflow-hidden rounded-2xl shadow-lg group">
             {secondaryImages[0] && (
                <Image
                    src={secondaryImages[0].src}
                    alt={secondaryImages[0].alt}
                    width={600}
                    height={400}
                    class="size-full object-cover object-center transition-image transition-transform group-hover:scale-105"
                />
             )}
        </div>

        {/* Secondary Bottom Image */}
        <div class="hidden lg:block relative overflow-hidden rounded-2xl shadow-lg group">
             {secondaryImages[1] && (
                <Image
                    src={secondaryImages[1].src}
                    alt={secondaryImages[1].alt}
                    width={600}
                    height={400}
                    class="size-full object-cover object-center transition-image transition-transform group-hover:scale-105"
                />
             )}
        </div>
      </div>
    </div>
  </div>
</section>
