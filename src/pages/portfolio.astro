---
import { getCollection } from 'astro:content';
import { SITE_TITLE } from '../consts';
import { Play, ArrowRight } from 'lucide-react';

import Background from "@/components/Background.astro";

import { PortfolioGrid } from '@/components/blocks/portfolio-grid';
import { Button } from '@/components/ui/button';
import DefaultLayout from '@/layouts/DefaultLayout.astro';
import { projectFromEntry } from '@/lib/portfolio-utils';
import { FeaturedProject } from '@/components/blocks/featured-project';

const entries = await getCollection('portfolio');
const allProjects = entries
  .map(projectFromEntry)
  .sort((a, b) => b.pubDate.valueOf() - a.pubDate.valueOf());

const featuredProject = allProjects.find(p => p.featured) || allProjects[0];
const remainingProjects = allProjects.filter(p => p.id !== featuredProject.id);
---

<DefaultLayout
  title="Video Production Portfolio | Lethbridge Documentary Work | Coalbanks"
  description="Watch our documentary-style films for Southern Alberta businesses. Brand documentaries, recruitment videos, and corporate storytelling examples."
>
  <Background>
    <div class="container flex max-w-5xl flex-col justify-between gap-8 md:gap-20 lg:flex-row lg:items-center lg:gap-24 xl:gap-24 pt-28 lg:pt-44 lg:pb-16">
      <div class="flex-[1.5]">
        <h1 class="font-display font-bold text-3xl tracking-tight sm:text-4xl md:text-5xl lg:text-6xl">
          Our Films
        </h1>

        <p class="text-muted-foreground mt-5 text-2xl md:text-3xl lg:text-4xl">
          We don't make videosâ€”we uncover stories. Documentary filmmaking that connects brands with the people who matter.
        </p>
      </div>
    </div>

    <div class="container pb-20 lg:pb-32 flex flex-col gap-24">
      <FeaturedProject client:visible project={featuredProject} />
      <PortfolioGrid client:visible projects={remainingProjects} />
    </div>



  </Background>
</DefaultLayout>
