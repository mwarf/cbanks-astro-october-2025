---
import { projects } from "@/lib/portfolio-data";
import DefaultLayout from "@/layouts/DefaultLayout.astro";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import { ArrowLeft, Play } from "lucide-react";
import { ProjectActions } from "@/components/blocks/project-actions";

export function getStaticPaths() {
  return projects.map((project) => ({
    params: { slug: project.id },
    props: { project },
  }));
}

const { project } = Astro.props;
const SITE_TITLE = "Coalbanks Creative"; // Should import this really
---

<DefaultLayout
  title={`${project.title} - ${SITE_TITLE}`}
  description={project.description}
>
  <div class="relative min-h-screen">
    {/* Hero Section */}
    <div class="relative h-[70vh] w-full overflow-hidden bg-black">
      <img
        src={project.image}
        alt={project.title}
        class="absolute inset-0 h-full w-full object-cover opacity-60"
      />
      <div class="absolute inset-0 bg-gradient-to-t from-background via-background/20 to-transparent">
      </div>
      
      <div class="container relative z-10 flex h-full flex-col justify-end pb-20">
        <a
          href="/portfolio"
          class="mb-8 flex w-fit items-center gap-2 rounded-full bg-black/50 px-4 py-2 text-sm font-medium text-white backdrop-blur-sm transition-colors hover:bg-black/70"
        >
          <ArrowLeft className="h-4 w-4" />
          Back to Portfolio
        </a>

        <div class="space-y-6">
          <div class="flex flex-wrap gap-3">
            {project.tags.map((tag) => (
              <Badge variant="secondary" className="bg-white/10 text-white hover:bg-white/20 border-none">
                {tag}
              </Badge>
            ))}
          </div>
          
          <h1 class="font-display text-5xl font-bold leading-tight text-white md:text-7xl lg:text-8xl">
            {project.title}
          </h1>
          
          <div class="flex flex-wrap items-center gap-8 text-lg text-white/80">
            <div>
              <span class="block text-sm text-white/50">Client</span>
              <span class="font-medium">{project.client}</span>
            </div>
            <div>
              <span class="block text-sm text-white/50">Service</span>
              <span class="font-medium">{project.category}</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    {/* Content Section */}
    <div class="container py-20 lg:py-32">
      <div class="grid gap-12 lg:grid-cols-12">
        {/* Main Story */}
        <div class="lg:col-span-8 space-y-8">
          <div class="prose prose-lg dark:prose-invert">
            <p class="text-xl leading-relaxed font-medium text-foreground">
              {project.description}
            </p>
            <p>
              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
            </p>
            <h3>The Challenge</h3>
            <p>
              Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
            </p>
            <h3>The Solution</h3>
            <p>
              Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.
            </p>
          </div>
        </div>

        {/* Sidebar / Actions */}
        <div class="lg:col-span-4 space-y-8">
           <div class="rounded-2xl border bg-card p-8 shadow-sm">
              <h3 class="font-display text-2xl font-bold mb-4">Project Details</h3>
              <dl class="space-y-4">
                <div>
                  <dt class="text-sm text-muted-foreground">Client</dt>
                  <dd class="font-medium">{project.client}</dd>
                </div>
                <div>
                  <dt class="text-sm text-muted-foreground">Date</dt>
                  <dd class="font-medium">October 2023</dd>
                </div>
                <div>
                  <dt class="text-sm text-muted-foreground">Director</dt>
                  <dd class="font-medium">Michael Warf</dd>
                </div>
              </dl>
              
              <div class="mt-8 pt-8 border-t">
                <ProjectActions client:load project={project} />
              </div>
           </div>
        </div>
      </div>
    </div>
  </div>
</DefaultLayout>
